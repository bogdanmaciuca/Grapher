@using Microsoft.AspNetCore.Identity
@using Grapher.Models

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<div class="d-flex align-items-center">
    @if (SignInManager.IsSignedIn(User))
    {
        <div class="me-3">
            <span class="navbar-text">
                @{
                // Get the full email/username
                var fullEmail = UserManager.GetUserName(User) ?? "";

                // Split it at the '@' symbol and take the first part
                var displayName = fullEmail.Split('@')[0];

                // Optional: Capitalize the first letter
                if (!string.IsNullOrEmpty(displayName))
                {
                displayName = char.ToUpper(displayName[0]) + displayName.Substring(1);
                }
                }
                Hello, @displayName!
            </span>
        </div>
        <form id="logoutForm" asp-area="Identity" asp-page="/Account/Logout" asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
            <button id="logout" type="submit" class="btn btn-outline-secondary rounded-pill px-4">Logout</button>
        </form>
    }
    else
    {
        <a class="btn btn-outline-primary rounded-pill px-4 me-2" id="register" asp-area="Identity" asp-page="/Account/Register">Register</a>
        <a class="btn btn-primary rounded-pill px-4" id="login" asp-area="Identity" asp-page="/Account/Login">Login</a>
    }
</div>
